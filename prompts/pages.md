# DENSOハンディ 画面一覧

## 画面番号体系

| 番号 | 画面名 | ルート |
|------|--------|--------|
| **P01** | ログイン画面 | `login` |
| **P02** | 設定画面 | `settings` |
| **P03** | メイン画面 | `main` |
| **P10** | 入庫 - 倉庫選択画面 | `incoming_warehouse_selection` |
| **P11** | 入庫 - 商品リスト画面 | `incoming_product_list` |
| **P12** | 入庫 - スケジュールリスト画面 | `incoming_schedule_list` |
| **P13** | 入庫 - 入庫入力画面 | `incoming_input` |
| **P14** | 入庫 - 入庫履歴画面 | `incoming_history` |
| **P20** | 出庫 - コース選択画面 | `picking_list` |
| **P21** | 出庫 - データ入力画面 | `outbound_picking/{taskId}` |
| **P22** | 出庫 - 出庫履歴画面 | `picking_history/{taskId}` |
| **P30** | 移動処理（未実装） | `move` |
| **P40** | 棚卸処理（未実装） | `inventory` |
| **P50** | ロケ検索（未実装） | `location_search` |

---

## 画面構成図

```
P01 ログイン画面
    ├── P02 設定画面
    └── P03 メイン画面（メニュー）
            ├── P10〜P14 入庫処理
            │       ├── P10 倉庫選択画面
            │       ├── P11 商品リスト画面
            │       ├── P12 スケジュールリスト画面
            │       ├── P13 入庫入力画面
            │       └── P14 入庫履歴画面
            ├── P20〜P22 出庫処理
            │       ├── P20 コース選択画面
            │       ├── P21 データ入力画面
            │       └── P22 出庫履歴画面
            ├── P30 移動処理（未実装）
            ├── P40 棚卸処理（未実装）
            └── P50 ロケ検索（未実装）
```

---

## P01 ログイン画面 (LoginScreen)

| 項目 | 内容 |
|------|------|
| **ページ番号** | P01 |
| **ファイル** | `feature/login/.../LoginScreen.kt` |
| **ルート** | `login` |
| **ヘッダー** | DENSOハンディ |
| **主な機能** | スタッフコード・パスワードでログイン認証 |
| **UI要素** | スタッフコード入力、パスワード入力、ログインボタン、設定ボタン |
| **フッター** | バージョン、日付、ホストURL |
| **遷移先** | P03 メイン画面、P02 設定画面 |

---

## P02 設定画面 (SettingsScreen)

| 項目 | 内容 |
|------|------|
| **ページ番号** | P02 |
| **ファイル** | `feature/settings/.../SettingsScreen.kt` |
| **ルート** | `settings` |
| **ヘッダー** | 設定 |
| **主な機能** | APIサーバーのホストURL設定 |
| **UI要素** | ホストURL入力、保存ボタン、注意事項カード |
| **遷移先** | 戻る（前の画面） |

---

## P03 メイン画面 (MainScreen)

| 項目 | 内容 |
|------|------|
| **ページ番号** | P03 |
| **ファイル** | `feature/main/.../MainScreen.kt` |
| **ルート** | `main` |
| **ヘッダー** | 作業者情報、倉庫名、設定ボタン |
| **主な機能** | 各機能へのナビゲーションメニュー |
| **UI要素** | 入庫処理ボタン、出庫処理ボタン、移動処理ボタン、棚卸処理ボタン、ロケ検索ボタン |
| **フッター** | 日付、ホストURL、ログアウトボタン、バージョン |
| **遷移先** | P10 倉庫選択、P20 コース選択、P02 設定、P01 ログイン（ログアウト時） |

---

## P10 入庫 - 倉庫選択画面 (WarehouseSelectionScreen)

| 項目 | 内容 |
|------|------|
| **ページ番号** | P10 |
| **ファイル** | `feature/inbound/.../incoming/WarehouseSelectionScreen.kt` |
| **ルート** | `incoming_warehouse_selection` |
| **ヘッダー** | 倉庫選択 |
| **主な機能** | 入庫作業を行う倉庫を選択 |
| **UI要素** | 倉庫リスト（ボタン形式） |
| **ファンクションキー** | F4: ログアウト |
| **遷移先** | P11 商品リスト画面 |

---

## P11 入庫 - 商品リスト画面 (ProductListScreen)

| 項目 | 内容 |
|------|------|
| **ページ番号** | P11 |
| **ファイル** | `feature/inbound/.../incoming/ProductListScreen.kt` |
| **ルート** | `incoming_product_list` |
| **ヘッダー** | {倉庫名} 入庫処理 |
| **主な機能** | 入庫予定のある商品一覧を表示・検索 |
| **UI要素** | 検索バー、商品リスト（JANコード、商品コード、商品名、残数量） |
| **ファンクションキー** | F1: 検索、F2: 履歴、F4: 戻る |
| **遷移先** | P12 スケジュールリスト、P14 入庫履歴 |

---

## P12 入庫 - スケジュールリスト画面 (ScheduleListScreen)

| 項目 | 内容 |
|------|------|
| **ページ番号** | P12 |
| **ファイル** | `feature/inbound/.../incoming/ScheduleListScreen.kt` |
| **ルート** | `incoming_schedule_list` |
| **ヘッダー** | {倉庫名} 入庫処理 |
| **主な機能** | 選択した商品の入庫スケジュール一覧を表示 |
| **UI要素** | 商品情報ヘッダー、合計入荷予定数、スケジュールリスト（倉庫名、予定日、ロケーション、予定数ボタン） |
| **ファンクションキー** | F2: 履歴、F4: 戻る |
| **遷移先** | P13 入庫入力、P14 入庫履歴 |

---

## P13 入庫 - 入庫入力画面 (IncomingInputScreen)

| 項目 | 内容 |
|------|------|
| **ページ番号** | P13 |
| **ファイル** | `feature/inbound/.../incoming/IncomingInputScreen.kt` |
| **ルート** | `incoming_input` |
| **ヘッダー** | {倉庫名} 入庫処理 |
| **主な機能** | 入庫数量・賞味期限・ロケーションを入力して登録 |
| **UI要素** | 商品情報ヘッダー、入荷日表示、賞味期限入力、ロケーション入力（オートコンプリート）、入庫数量入力 |
| **ファンクションキー** | F1: 自動（予定数をセット）、F2: 登録、F4: 戻る |
| **遷移先** | P12 スケジュールリスト（登録成功時） |

---

## P14 入庫 - 入庫履歴画面 (HistoryScreen)

| 項目 | 内容 |
|------|------|
| **ページ番号** | P14 |
| **ファイル** | `feature/inbound/.../incoming/HistoryScreen.kt` |
| **ルート** | `incoming_history` |
| **ヘッダー** | {倉庫名} 入庫処理 |
| **主な機能** | 本日の入庫作業履歴を表示・編集 |
| **UI要素** | 「本日の入庫履歴」ヘッダー、履歴リスト（JANコード、商品名、倉庫名、日付、ステータスバッジ、数量） |
| **ファンクションキー** | F2: リスト、F4: 戻る |
| **遷移先** | P13 入庫入力（編集時）、P11 商品リスト |

---

## P20 出庫 - コース選択画面 (PickingTasksScreen)

| 項目 | 内容 |
|------|------|
| **ページ番号** | P20 |
| **ファイル** | `feature/outbound/.../tasks/PickingTasksScreen.kt` |
| **ルート** | `picking_list` |
| **ヘッダー** | 出庫処理 |
| **主な機能** | 自分の担当コース一覧を表示し、作業対象コースを選択 |
| **UI要素** | コースカード（コース名、進捗、コースコード、エリア名、ステータスバッジ）、Pull-to-Refresh |
| **ファンクションキー** | F2: 戻る |
| **遷移先** | P21 データ入力（PENDING有り）、P22 出庫履歴（PICKING有り/全完了） |

### タップ時の遷移ロジック
- PENDING有り → タスク開始API → P21 データ入力
- PICKING有り（PENDING無し） → P22 出庫履歴（編集モード）
- 全COMPLETED/SHORTAGE → P22 出庫履歴（読取専用モード）

### ステータスバッジ
| 条件 | 表示 |
|------|------|
| PENDING有り | 未着手 (Gray) |
| PICKING有り | 進行中 (Blue) |
| 全COMPLETED/SHORTAGE | 完了 (Green) |

---

## P21 出庫 - データ入力画面 (OutboundPickingScreen)

| 項目 | 内容 |
|------|------|
| **ページ番号** | P21 |
| **ファイル** | `feature/outbound/.../picking/OutboundPickingScreen.kt` |
| **ルート** | `outbound_picking/{taskId}` |
| **ヘッダー** | 出庫処理 + [◀ 1/5 ▶] アイテムナビゲーション |
| **主な機能** | PENDINGアイテムを1件ずつ表示し、ピッキング数量を入力して登録 |
| **UI要素** | コース情報ヘッダー、商品情報カード（伝票・商品名・JAN・容量・入数・包装・温度帯）、予定数量（読取専用）、ピッキング数量（入力欄）、完了確認ダイアログ |
| **ファンクションキー** | F1: 登録、F2: 戻る、F3: 履歴 |
| **遷移先** | P22 出庫履歴（F3:履歴）、P20 コース選択（F2:戻る / 確定完了時） |

### F1:登録後の動作
1. サーバーからタスク再取得（カウンター更新）
2. PENDINGアイテムを再フィルタ
3. 次のPENDINGアイテムがあれば表示
4. 全件登録完了 → 完了確認ダイアログ → 確定でP20へ / キャンセルでP22へ

---

## P22 出庫 - 出庫履歴画面 (PickingHistoryScreen)

| 項目 | 内容 |
|------|------|
| **ページ番号** | P22 |
| **ファイル** | `feature/outbound/.../picking/PickingHistoryScreen.kt` |
| **ルート** | `picking_history/{taskId}` |
| **ヘッダー** | 出庫処理（履歴） |
| **主な機能** | PICKING/COMPLETED/SHORTAGEアイテムの一覧表示、削除、全件確定 |
| **UI要素** | 履歴カード（商品名、伝票、容量、JAN、予定/実績数量、ステータスバッジ）、削除確認ダイアログ、確定確認ダイアログ（件数表示） |
| **ファンクションキー（編集モード）** | F2: 戻る、F3: 削除、F4: 確定 |
| **ファンクションキー（読取専用モード）** | F2: 戻る |
| **遷移先** | P20 コース選択（F4:確定時）、P21 データ入力（F2:戻る時） |

### 2つのモード
| モード | 条件 | 表示 |
|--------|------|------|
| 編集モード | PIKCINGステータスのアイテムが1件以上 | 履歴リスト + F2/F3/F4 |
| 読取専用モード | 全アイテムがCOMPLETED/SHORTAGE | 「確定済み」メッセージ + 履歴リスト + F2のみ |

### F3:削除操作フロー
1. 履歴カードをタップして選択（ハイライト表示）
2. F3を押下
3. 削除確認ダイアログ表示 → 削除でPENDINGに戻す

---

## ファンクションキー共通仕様

| キー | 主な用途 |
|------|----------|
| **F1** | 検索、自動入力などの補助機能 |
| **F2** | 履歴表示、登録、リスト表示 |
| **F3** | （予備） |
| **F4** | 戻る、ログアウト |

---

## 画面遷移フロー

### 入庫処理フロー
```
P03 メイン → P10 倉庫選択 → P11 商品リスト → P12 スケジュールリスト → P13 入庫入力 → P12
                                      ↓
                                P14 入庫履歴 ←→ P13 入庫入力（編集）
```

### 出庫処理フロー
```
P03 メイン
  │
  ├─[出庫処理ボタン]──→ P20 コース選択
  │                      │
  │                      ├─[コースタップ（PENDING有り）]──→ P21 データ入力
  │                      │                                   │
  │                      │                                   ├─[F3:履歴]──→ P22 出庫履歴
  │                      │                                   │              │
  │                      │                                   │              ├─[F2:戻る]──→ P21
  │                      │                                   │              ├─[F4:確定]──→ P20（リフレッシュ）
  │                      │                                   │              └─[F3:削除]──→ P22（アイテム→PENDING戻し）
  │                      │                                   │
  │                      │                                   ├─[F1:登録]──→ 次のPENDINGアイテムへ
  │                      │                                   ├─[F2:戻る]──→ P20
  │                      │                                   └─[全件登録完了]──→ 完了ダイアログ → P20
  │                      │
  │                      ├─[コースタップ（PICKING有り）]──→ P22 出庫履歴（編集モード）
  │                      ├─[コースタップ（全完了）]──→ P22 出庫履歴（読取専用モード）
  │                      └─[F2:戻る]──→ P03 メイン
```
